<mxfile host="app.diagrams.net" modified="2022-11-29T14:41:32.422Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/107.0.0.0 Safari/537.36" etag="W9jDjj37UBWc8U8oi7j_" version="20.6.0" type="github" pages="3">
  <diagram id="MfXXb4WImXXGonZBl1zO" name="tables">
    <mxGraphModel dx="1538" dy="866" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="SHEiqIxmCzsN00dnTPzk-1" value="req_table" style="shape=table;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fontStyle=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="70" y="60" width="210" height="150" as="geometry" />
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-2" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="SHEiqIxmCzsN00dnTPzk-1" vertex="1">
          <mxGeometry y="30" width="210" height="24" as="geometry" />
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-3" value="req_id" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-2" vertex="1">
          <mxGeometry width="70" height="24" as="geometry">
            <mxRectangle width="70" height="24" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-4" value="initi" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-2" vertex="1">
          <mxGeometry x="70" width="70" height="24" as="geometry">
            <mxRectangle width="70" height="24" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-5" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-2" vertex="1">
          <mxGeometry x="140" width="70" height="24" as="geometry">
            <mxRectangle width="70" height="24" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-6" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="SHEiqIxmCzsN00dnTPzk-1" vertex="1">
          <mxGeometry y="54" width="210" height="48" as="geometry" />
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-7" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-6" vertex="1">
          <mxGeometry width="70" height="48" as="geometry">
            <mxRectangle width="70" height="48" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-8" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-6" vertex="1">
          <mxGeometry x="70" width="70" height="48" as="geometry">
            <mxRectangle width="70" height="48" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-9" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-6" vertex="1">
          <mxGeometry x="140" width="70" height="48" as="geometry">
            <mxRectangle width="70" height="48" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-10" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="SHEiqIxmCzsN00dnTPzk-1" vertex="1">
          <mxGeometry y="102" width="210" height="48" as="geometry" />
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-11" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-10" vertex="1">
          <mxGeometry width="70" height="48" as="geometry">
            <mxRectangle width="70" height="48" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-12" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-10" vertex="1">
          <mxGeometry x="70" width="70" height="48" as="geometry">
            <mxRectangle width="70" height="48" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="SHEiqIxmCzsN00dnTPzk-13" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="SHEiqIxmCzsN00dnTPzk-10" vertex="1">
          <mxGeometry x="140" width="70" height="48" as="geometry">
            <mxRectangle width="70" height="48" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--15" value="process" style="shape=table;startSize=30;container=1;collapsible=0;childLayout=tableLayout;fontStyle=1;align=center;" parent="1" vertex="1">
          <mxGeometry x="350" y="190" width="236" height="150" as="geometry" />
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--16" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="MrCpXkfEFID5w43POxy--15" vertex="1">
          <mxGeometry y="30" width="236" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--17" value="req_id" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--16" vertex="1">
          <mxGeometry width="79" height="40" as="geometry">
            <mxRectangle width="79" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--18" value="type" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--16" vertex="1">
          <mxGeometry x="79" width="78" height="40" as="geometry">
            <mxRectangle width="78" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--19" value="status" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--16" vertex="1">
          <mxGeometry x="157" width="79" height="40" as="geometry">
            <mxRectangle width="79" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--20" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="MrCpXkfEFID5w43POxy--15" vertex="1">
          <mxGeometry y="70" width="236" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--21" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--20" vertex="1">
          <mxGeometry width="79" height="40" as="geometry">
            <mxRectangle width="79" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--22" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--20" vertex="1">
          <mxGeometry x="79" width="78" height="40" as="geometry">
            <mxRectangle width="78" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--23" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--20" vertex="1">
          <mxGeometry x="157" width="79" height="40" as="geometry">
            <mxRectangle width="79" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--24" value="" style="shape=tableRow;horizontal=0;startSize=0;swimlaneHead=0;swimlaneBody=0;top=0;left=0;bottom=0;right=0;collapsible=0;dropTarget=0;fillColor=none;points=[[0,0.5],[1,0.5]];portConstraint=eastwest;" parent="MrCpXkfEFID5w43POxy--15" vertex="1">
          <mxGeometry y="110" width="236" height="40" as="geometry" />
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--25" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--24" vertex="1">
          <mxGeometry width="79" height="40" as="geometry">
            <mxRectangle width="79" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--26" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--24" vertex="1">
          <mxGeometry x="79" width="78" height="40" as="geometry">
            <mxRectangle width="78" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
        <mxCell id="MrCpXkfEFID5w43POxy--27" value="" style="shape=partialRectangle;html=1;whiteSpace=wrap;connectable=0;fillColor=none;top=0;left=0;bottom=0;right=0;overflow=hidden;" parent="MrCpXkfEFID5w43POxy--24" vertex="1">
          <mxGeometry x="157" width="79" height="40" as="geometry">
            <mxRectangle width="79" height="40" as="alternateBounds" />
          </mxGeometry>
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="3BrmgJNmMBpRZ1kx3Aow" name="lambda_tasks">
    <mxGraphModel dx="1538" dy="866" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="mas6N3pDTHSOJlXkNHy8-1" value="&lt;b&gt;validator:&lt;br&gt;&lt;/b&gt;1. user authentication&lt;br&gt;2. id_generation&lt;br&gt;3. logs, put on a status, req_id, channel&lt;br&gt;4. data validation (email format, mobile no format)&lt;br&gt;5. template_validation and params validation&lt;br&gt;6. push data to requests table, put on a status&lt;br&gt;7. push the request msg to queue.&lt;br&gt;8. logs, put on a status&lt;br&gt;&lt;b&gt;9. based on the channels create multiple records and save it to notif_table.&amp;nbsp;&lt;br&gt;&lt;/b&gt;9. return a response with notif_id to user" style="whiteSpace=wrap;html=1;aspect=fixed;align=left;" parent="1" vertex="1">
          <mxGeometry x="30" y="80" width="250" height="250" as="geometry" />
        </mxCell>
        <mxCell id="vF4irorgox3Fh12-01dQ-1" value="&lt;b&gt;generator:&lt;br&gt;&lt;/b&gt;1. logging based on &lt;b&gt;req_id&lt;/b&gt;&lt;br&gt;2. pull a (batch of) msgs from queue : &lt;b&gt;TRIGGER&lt;/b&gt;&lt;br&gt;3. logs, put on a status, req_id, channel&lt;br&gt;4. based on the channel(s), call for templates (strapi)&lt;br&gt;5. generate the formatted emails with templates and request data&lt;br&gt;6. Pdfs for emails and whatsapp (required), pdf resource link for SMS&lt;br&gt;7. push the pdf/media resource in S3 bucket and fetch the resource URL.&lt;br&gt;8. &lt;b&gt;push the formatted msgs along with the required resource URLs (s3 bucket) to different queues based on the notification channel (different queues for different channels).&lt;br&gt;&lt;/b&gt;9. notif_table status updation.&lt;br&gt;10. logs, put on a status, req_id, channel" style="whiteSpace=wrap;html=1;aspect=fixed;align=left;" vertex="1" parent="1">
          <mxGeometry x="340" y="70" width="290" height="290" as="geometry" />
        </mxCell>
        <mxCell id="Tcaw5HxARU_J9JIfhgr_-1" value="&lt;b&gt;handler:&lt;br&gt;&lt;/b&gt;1.&amp;nbsp;pull msgs from the queue.&lt;br&gt;2. logs, put on a status, req_id, channel&lt;br&gt;3. pull the resource from s3 bucket (if required)&lt;br&gt;4. logs&lt;br&gt;5. based on the channel, send the msg to a specific client (based on the channel and the geography, different clients for different locations)&lt;br&gt;6. if the client response is okay delete the msg&lt;br&gt;7. logs&lt;br&gt;8. if not, retry.&lt;br&gt;9. logs, put on a status&lt;br&gt;10. notif_table, req table status updation." style="whiteSpace=wrap;html=1;aspect=fixed;align=left;" vertex="1" parent="1">
          <mxGeometry x="200" y="460" width="270" height="270" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
  <diagram id="gBMiM9UazXaEZQsaFOZw" name="Qs">
    <mxGraphModel dx="1538" dy="866" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="RNpIdmL0-pYFz_je5dq4-1" value="*. What DB? What basis?&lt;br&gt;1. do we need to authenticate the notification requests?&lt;br&gt;2. Template validation and params validation? How should this be done, call to strapi or call to a table storing the required data?&lt;br&gt;3. For notifications to be sent on multiple channels (whatsapp and email), should we create a new table to store the individual notifications? Or should we add three columns for respective statuses.&lt;br&gt;4. Sending all notifications at the same time necessary? (gap of 2-3 hrs okay?)&lt;br&gt;5. Link for PDF ticket required on SMS or not?" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="640" height="550" as="geometry" />
        </mxCell>
        <mxCell id="CwocjBBtfWNI_5yUV13q-1" value="&lt;b&gt;DISCUSS&lt;br&gt;If we save the individual notification entries for each channel, we can pass the identifier in the first queue and the notification generator will fetch different types of notifications from the notifications table and try to create a notification (mapping data with templates).&lt;/b&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="520" width="770" height="210" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
